{
  "swagger": "2.0",
  "info": {
    "description": "REST service API.",
    "version": "1.0.1",
    "title": "AFarCloud REST API"
  },
  "host": "localhost:8080",
  "basePath": "/",
  "tags": [
    {
      "name": "Sensor"
    },
    {
      "name": "Collar"
    },
    {
      "name": "Region"
    }
  ],
  "schemes": [
    "http"
  ],
  "paths": {
    "/{scenario}/collar/measure": {
      "post": {
        "tags": [
          "Collar"
        ],
        "operationId": "getMeasureCollar",
        "consumes": [
          "text/plain"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "scenario",
            "in": "path",
            "description": "AFarCloud scenario (\"as01\" to \"as11\")",
            "required": true,
            "type": "string",
            "pattern": "as01|as02|as03|as04|as05|as06|as07|as08|as09|as10|as11"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/schemas/collar"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input: not AFarCloud-compliant"
          },
          "415": {
            "description": "Invalid input: not a JSON"
          }
        }
      }
    },
    "/{scenario}/collar/measureList": {
      "post": {
        "tags": [
          "Collar"
        ],
        "operationId": "getMeasureCollarList",
        "consumes": [
          "text/plain"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "scenario",
            "in": "path",
            "description": "AFarCloud scenario (\"as01\" to \"as11\")",
            "required": true,
            "type": "string",
            "pattern": "as01|as02|as03|as04|as05|as06|as07|as08|as09|as10|as11"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/schemas/collarList"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input: not AFarCloud-compliant"
          },
          "415": {
            "description": "Invalid input: not a JSON"
          }
        }
      }
    },
    "/{scenario}/region/measure": {
      "post": {
        "tags": [
          "Region"
        ],
        "operationId": "getMeasureRegion",
        "consumes": [
          "text/plain"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "scenario",
            "in": "path",
            "description": "AFarCloud scenario (\"as01\" to \"as11\")",
            "required": true,
            "type": "string",
            "pattern": "as01|as02|as03|as04|as05|as06|as07|as08|as09|as10|as11"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/schemas/region"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input: not AFarCloud-compliant"
          },
          "415": {
            "description": "Invalid input: not a JSON"
          }
        }
      }
    },
    "/{scenario}/region/measureList": {
      "post": {
        "tags": [
          "Region"
        ],
        "description": "",
        "operationId": "getMeasureRegionList",
        "consumes": [
          "text/plain"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "scenario",
            "in": "path",
            "description": "AFarCloud scenario (\"as01\" to \"as11\")",
            "required": true,
            "type": "string",
            "pattern": "as01|as02|as03|as04|as05|as06|as07|as08|as09|as10|as11"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/schemas/regionList"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input: not AFarCloud-compliant"
          },
          "415": {
            "description": "Invalid input: not a JSON"
          }
        }
      }
    },
    "/{scenario}/sensor/measure": {
      "post": {
        "tags": [
          "Sensor"
        ],
        "operationId": "getMeasureSensor",
        "consumes": [
          "text/plain"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "scenario",
            "in": "path",
            "description": "AFarCloud scenario (\"as01\" to \"as11\")",
            "required": true,
            "type": "string",
            "pattern": "as01|as02|as03|as04|as05|as06|as07|as08|as09|as10|as11"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/schemas/sensor"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input: not AFarCloud-compliant"
          },
          "415": {
            "description": "Invalid input: not a JSON"
          }
        }
      }
    },
    "/{scenario}/sensor/measureList": {
      "post": {
        "tags": [
          "Sensor"
        ],
        "operationId": "getMeasureSensorList",
        "consumes": [
          "text/plain"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "scenario",
            "in": "path",
            "description": "AFarCloud scenario (\"as01\" to \"as11\")",
            "required": true,
            "type": "string",
            "pattern": "as01|as02|as03|as04|as05|as06|as07|as08|as09|as10|as11"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/schemas/sensorList"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input: not AFarCloud-compliant"
          },
          "415": {
            "description": "Invalid input: not a JSON"
          }
        }
      }
    }
  },
  "schemas": {
    "regionList": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "type": "object",
      "properties": {
        "sequenceNumber": {
          "type": "integer"
        },
        "regions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "resourceId": {
                "type": "string"
              },
              "resultTime": {
                "type": "integer"
              },
              "locationDimension": {
                "type": "object",
                "properties": {
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  },
                  "width": {
                    "type": "number"
                  },
                  "length": {
                    "type": "number"
                  }
                },
                "required": [
                  "latitude",
                  "longitude",
                  "width",
                  "length"
                ]
              }
            },
            "required": [
              "resourceId",
              "resultTime",
              "locationDimension"
            ]
          }
        }
      },
      "required": [
        "sequenceNumber",
        "regions"
      ]
    },
    "region": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "type": "object",
      "properties": {
        "sequenceNumber": {
          "type": "integer"
        },
        "region": {
          "type": "object",
          "properties": {
            "resourceId": {
              "type": "string"
            },
            "resultTime": {
              "type": "integer"
            },
            "locationDimension": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number"
                },
                "longitude": {
                  "type": "number"
                },
                "width": {
                  "type": "number"
                },
                "length": {
                  "type": "number"
                }
              },
              "required": [
                "latitude",
                "longitude",
                "width",
                "length"
              ]
            }
          },
          "required": [
            "resourceId",
            "resultTime",
            "locationDimension"
          ]
        }
      },
      "required": [
        "sequenceNumber",
        "region"
      ]
    },
    "sensorList": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "type": "object",
      "properties": {
        "resourceId": {
          "type": "string"
        },
        "sequenceNumber": {
          "type": "integer"
        },
        "location": {
          "type": "object",
          "properties": {
            "latitude": {
              "type": "number"
            },
            "longitude": {
              "type": "number"
            },
            "altitude": {
              "type": "number"
            }
          },
          "required": [
            "latitude",
            "longitude",
            "altitude"
          ]
        },
        "observations": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "resourceId": {
                "type": "string"
              },
              "observedProperty": {
                "type": "string"
              },
              "resultTime": {
                "type": "integer"
              },
              "result": {
                "type": "object",
                "properties": {
                  "value": {
                    "type": "number"
                  },
                  "uom": {
                    "type": "string"
                  },
                  "variance": {
                    "type": "integer"
                  }
                },
                "required": [
                  "value",
                  "uom",
                  "variance"
                ]
              }
            },
            "required": [
              "resourceId",
              "observedProperty",
              "resultTime",
              "result"
            ]
          }
        }
      },
      "required": [
        "resourceId",
        "sequenceNumber",
        "location",
        "observations"
      ]
    },
    "sensor": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "type": "object",
      "properties": {
        "sequenceNumber": {
          "type": "integer"
        },
        "location": {
          "type": "object",
          "properties": {
            "latitude": {
              "type": "number"
            },
            "longitude": {
              "type": "number"
            },
            "altitude": {
              "type": "number"
            }
          },
          "required": [
            "latitude",
            "longitude",
            "altitude"
          ]
        },
        "observation": {
          "type": "object",
          "properties": {
            "resourceId": {
              "type": "string"
            },
            "observedProperty": {
              "type": "string"
            },
            "resultTime": {
              "type": "integer"
            },
            "result": {
              "type": "object",
              "properties": {
                "value": {
                  "type": "number"
                },
                "uom": {
                  "type": "string"
                },
                "variance": {
                  "type": "integer"
                }
              },
              "required": [
                "value",
                "uom",
                "variance"
              ]
            }
          },
          "required": [
            "resourceId",
            "observedProperty",
            "resultTime",
            "result"
          ]
        }
      },
      "required": [
        "sequenceNumber",
        "location",
        "observation"
      ]
    },
    "collarList": {
      "sequenceNumber": 123,
      "collars": [
        {
          "resourceId": "urn:afc:AS06:livestockObservations:SENSO:collar0034",
          "location": {
            "latitude": 45.45123,
            "longitude": 25.25456,
            "altitude": 2.10789
          },
          "resultTime": 1558086914,
          "resourceAlarm": true,
          "anomalies": {
            "locationAnomaly": true,
            "temperatureAnomaly": true,
            "distanceAnomaly": true,
            "activityAnomaly": true,
            "positionAnomaly": true
          },
          "acceleration": {
            "accX": 0,
            "accY": 0,
            "accZ": 0
          },
          "temperature": 36.5
        }
      ]
    },
    "collar": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "type": "object",
      "properties": {
        "sequenceNumber": {
          "type": "integer"
        },
        "collar": {
          "type": "object",
          "properties": {
            "resourceId": {
              "type": "string"
            },
            "location": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number"
                },
                "longitude": {
                  "type": "number"
                },
                "altitude": {
                  "type": "number"
                }
              },
              "required": [
                "latitude",
                "longitude",
                "altitude"
              ]
            },
            "resultTime": {
              "type": "integer"
            },
            "resourceAlarm": {
              "type": "boolean"
            },
            "anomalies": {
              "type": "object",
              "properties": {
                "locationAnomaly": {
                  "type": "boolean"
                },
                "temperatureAnomaly": {
                  "type": "boolean"
                },
                "distanceAnomaly": {
                  "type": "boolean"
                },
                "activityAnomaly": {
                  "type": "boolean"
                },
                "positionAnomaly": {
                  "type": "boolean"
                }
              },
              "required": [
                "locationAnomaly",
                "temperatureAnomaly",
                "distanceAnomaly",
                "activityAnomaly",
                "positionAnomaly"
              ]
            },
            "acceleration": {
              "type": "object",
              "properties": {
                "accX": {
                  "type": "integer"
                },
                "accY": {
                  "type": "integer"
                },
                "accZ": {
                  "type": "integer"
                }
              },
              "required": [
                "accX",
                "accY",
                "accZ"
              ]
            },
            "temperature": {
              "type": "number"
            }
          },
          "required": [
            "resourceId",
            "location",
            "resultTime",
            "resourceAlarm",
            "anomalies",
            "acceleration",
            "temperature"
          ]
        }
      },
      "required": [
        "sequenceNumber",
        "collar"
      ]
    }
  }
}
