openapi: 3.0.0
info:
  description: REST service API.
  version: 1.0.1
  title: AFarCloud REST API
  contact:
    name: Vicente Hernández Díaz
    email: vicente.hernandez@upm.es 
externalDocs:
   description: Find out more about AFarCloud
   url: http://www.afarcloud.eu/    
tags:
  - name: POST Telemetry
  - name: Test your JSON data format
paths:
  "/telemetry":
    post:
      tags:
        - POST Telemetry
      summary: Post telemetry data  
      operationId: getMeasure 
      requestBody:
        content:
          application/json:
            schema:
             oneOf:
                - $ref: 'https://138.100.51.114:443/schemas/CollarListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/CollarSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorSchema_Complete.json'
                - $ref: 'https://138.100.51.114:443/schemas/GatewayListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/MultiSensorListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/RegionListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/RegionSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorListSchema_Complete.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorListSchema_Simplified.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorSchema_Simplified.json'
            examples:
              Collar Measurement: 
               value: {
                
  "collar": {
    "resourceId": "ABCDEFGHIJKLMNOPQRSTUVWXYZAB",
    "location": {
      "latitude": 445.5,
      "longitude": 250.5,
      "altitude": 433.0
    },
    "resultTime": 329,
    "resourceAlarm": false,
    "anomalies": {
      "locationAnomaly": false,
      "temperatureAnomaly": false,
      "distanceAnomaly": false,
      "activityAnomaly": true,
      "positionAnomaly": false
    },
    "acceleration": {
      "accX": 264,
      "accY": 766,
      "accZ": 652
    },
    "temperature": 15.25
  },
  "sequenceNumber": 909
}
              
              List Of Collar Measurements: 
               value: {
                
                "collars": [
                  {
                    "resourceId": "ABCDEFGH",
                    "location": {
                      "latitude": 799.5,
                      "longitude": -13.75,
                      "altitude": 781.75
                    },
                    "resultTime": 992,
                    "resourceAlarm": true,
                    "anomalies": {
                      "locationAnomaly": false,
                      "temperatureAnomaly": true,
                      "distanceAnomaly": false,
                      "activityAnomaly": false,
                      "positionAnomaly": true
                    },
                    "acceleration": {
                      "accX": -88,
                      "accY": 867,
                      "accZ": 984
                    },
                    "temperature": 573.5
                  }
                ],
                "sequenceNumber": -24
              
              }
             
              Region Measurement: 
                             value: {
                               
                  "region": {
                    "resourceId": "ABCDEFGHIJKLMNOPQRSTUVWXYZAB",
                    "resultTime": 143,
                    "locationDimension": {
                      "latitude": 250.5,
                      "longitude": 433.0,
                      "width": 329.25,
                      "length": 490.5
                    }
                  },
                  "sequenceNumber": 361
                
              }
              List of Region Measurements: 
                             value: {
                                
                "regions": [
                  {
                    "resourceId": "ABCDEFGH",
                    "resultTime": 445,
                    "locationDimension": {
                      "latitude": -13.75,
                      "longitude": 781.75,
                      "width": 992.75,
                      "length": 219.75
                    }
                  }
                ],
                "sequenceNumber": 235
              
              }
              Aggregated Measurements from Multi-Parameter Sensors: 
               value: {
                                   
                    "resourceId": "urn:afc:DN*/!:3: :h:B3?",
                    "location": {
                      "latitude": 13.75,
                      "longitude": 249.5,
                      "altitude": 914.0
                    },
                    "observations": [
                      {
                        "observedProperty": "ABCDEFGHIJ",
                        "resultTime": 501,
                        "result": {
                          "value": 12.5,
                          "uom": "ABCDEFGHIJKL"
                        }
                      }
                    ],
                    "sequenceNumber": 327
                  
              }
              Aggregated Measurements Through Gateway: 
               value: {
                                
                  "deviceId": "urn:afc:DN*/!:3: :h:B3?",
                  "location": {
                    "latitude": 13.75,
                    "longitude": 249.5,
                    "altitude": 914.0
                  },
                  "observations": [
                    {
                      "resourceId": "urn:afc:_:uXP s:I: %o:4",
                      "observedProperty": "ABCDEFGHIJKLMNOP",
                      "resultTime": 637,
                      "result": {
                        "value": 698.0,
                        "uom": "ABCDEFGHI"
                      }
                    }
                  ],
                  "sequenceNumber": 0
                
              }
              Sensor Measurement (Complete Version): 
                             value: {
                                                 
                    "resourceId": "urn:afc:DN*/!:3: :h:B3?",
                    "location": {
                      "latitude": 13.75,
                      "longitude": 249.5,
                      "altitude": 914.0
                    },
                    "observedProperty": "ABCDEFGHIJKLMNOP",
                    "resultTime": 624,
                    "result": {
                      "value": 558.0,
                      "uom": "ABCDEFG"
                    },
                    "sequenceNumber": 394
                  
              }
              Sensor Measurement (Simplified Version): 
                             value: {
                                      
                    "resultTime": 149,
                    "result": {
                      "value": 143.5
                    },
                    "resourceId": "ABCDEFGHIJKLM",
                    "sequenceNumber": 922
                  
              }
              Sensor List of Measurements (Complete Version): 
                             value: {
                               
                          "resourceId": "urn:afc:DN*/!:3: :h:B3?",
                          "location": {
                            "latitude": 13.75,
                            "longitude": 249.5,
                            "altitude": 914.0
                          },
                          "observedProperty": "ABCDEFGHIJKLMNOP",
                          "uom": 624,
                          "observations": [
                            {
                              "resultTime": 421,
                              "result": {
                                "value": 259.0
                              }
                            }
                          ],
                          "sequenceNumber": 327
                        
                     }
              Sensor List of Measurements (Simplified Version): 
                             value: {
                            
                          "resourceId": "ABCDEFGHI",
                          "observations": [
                            {
                              "resultTime": 445,
                              "result": {
                                "value": -13.75
                              }
                            }
                          ],
                          "sequenceNumber": 781
                        
                     }
                     
              
        required: true
      responses:
        "200":
          description: "Successful operation"
        "405":
          description: "Invalid input: not AFarCloud-compliant"
        "415":
          description: "Invalid input: not a JSON"
  "/telemetry?test":
    post:
      tags:
        - Test your JSON data format
      summary: Test JSON  
      operationId: testMeasure
      requestBody:
        content:
          application/json:
            schema:
             oneOf:
                - $ref: 'https://138.100.51.114:443/schemas/CollarListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/CollarSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorSchema_Complete.json'
                - $ref: 'https://138.100.51.114:443/schemas/GatewayListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/MultiSensorListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/RegionListSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/RegionSchema.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorListSchema_Complete.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorListSchema_Simplified.json'
                - $ref: 'https://138.100.51.114:443/schemas/SensorSchema_Simplified.json'
            examples:
                Collar Measurement: 
                 value: {
                                
                  "collar": {
                    "resourceId": "ABCDEFGHIJKLMNOPQRSTUVWXYZAB",
                    "location": {
                      "latitude": 445.5,
                      "longitude": 250.5,
                      "altitude": 433.0
                    },
                    "resultTime": 329,
                    "resourceAlarm": false,
                    "anomalies": {
                      "locationAnomaly": false,
                      "temperatureAnomaly": false,
                      "distanceAnomaly": false,
                      "activityAnomaly": true,
                      "positionAnomaly": false
                    },
                    "acceleration": {
                      "accX": 264,
                      "accY": 766,
                      "accZ": 652
                    },
                    "temperature": 15.25
                  },
                  "sequenceNumber": 909
                }
              
                List Of Collar Measurements: 
                    value: {
                    
                    "collars": [
                      {
                        "resourceId": "ABCDEFGH",
                        "location": {
                          "latitude": 799.5,
                          "longitude": -13.75,
                          "altitude": 781.75
                        },
                        "resultTime": 992,
                        "resourceAlarm": true,
                        "anomalies": {
                          "locationAnomaly": false,
                          "temperatureAnomaly": true,
                          "distanceAnomaly": false,
                          "activityAnomaly": false,
                          "positionAnomaly": true
                        },
                        "acceleration": {
                          "accX": -88,
                          "accY": 867,
                          "accZ": 984
                        },
                        "temperature": 573.5
                      }
                    ],
                    "sequenceNumber": -24
                  
                  }
             
                Region Measurement: 
                             value: {
                               
                      "region": {
                        "resourceId": "ABCDEFGHIJKLMNOPQRSTUVWXYZAB",
                        "resultTime": 143,
                        "locationDimension": {
                          "latitude": 250.5,
                          "longitude": 433.0,
                          "width": 329.25,
                          "length": 490.5
                        }
                      },
                      "sequenceNumber": 361
                    
                  }
                List of Region Measurements: 
                             value: {
                                
                    "regions": [
                      {
                        "resourceId": "ABCDEFGH",
                        "resultTime": 445,
                        "locationDimension": {
                          "latitude": -13.75,
                          "longitude": 781.75,
                          "width": 992.75,
                          "length": 219.75
                        }
                      }
                    ],
                    "sequenceNumber": 235
                  
                  }
                Aggregated Measurements from Multi-Parameter Sensors: 
                 value: {
                                   
                    "resourceId": "urn:afc:DN*/!:3: :h:B3?",
                    "location": {
                      "latitude": 13.75,
                      "longitude": 249.5,
                      "altitude": 914.0
                    },
                    "observations": [
                      {
                        "observedProperty": "ABCDEFGHIJ",
                        "resultTime": 501,
                        "result": {
                          "value": 12.5,
                          "uom": "ABCDEFGHIJKL"
                        }
                      }
                    ],
                    "sequenceNumber": 327
                  
              }
                Aggregated Measurements Through Gateway: 
                 value: {
                                
                  "deviceId": "urn:afc:DN*/!:3: :h:B3?",
                  "location": {
                    "latitude": 13.75,
                    "longitude": 249.5,
                    "altitude": 914.0
                  },
                  "observations": [
                    {
                      "resourceId": "urn:afc:_:uXP s:I: %o:4",
                      "observedProperty": "ABCDEFGHIJKLMNOP",
                      "resultTime": 637,
                      "result": {
                        "value": 698.0,
                        "uom": "ABCDEFGHI"
                      }
                    }
                  ],
                  "sequenceNumber": 0
                
              }
                Sensor Measurement (Complete Version): 
                             value: {
                                                 
                    "resourceId": "urn:afc:DN*/!:3: :h:B3?",
                    "location": {
                      "latitude": 13.75,
                      "longitude": 249.5,
                      "altitude": 914.0
                    },
                    "observedProperty": "ABCDEFGHIJKLMNOP",
                    "resultTime": 624,
                    "result": {
                      "value": 558.0,
                      "uom": "ABCDEFG"
                    },
                    "sequenceNumber": 394
                  
              }
                Sensor Measurement (Simplified Version): 
                             value: {
                                      
                    "resultTime": 149,
                    "result": {
                      "value": 143.5
                    },
                    "resourceId": "ABCDEFGHIJKLM",
                    "sequenceNumber": 922
                  
              }
                Sensor List of Measurements (Complete Version): 
                             value: {
                               
                          "resourceId": "urn:afc:DN*/!:3: :h:B3?",
                          "location": {
                            "latitude": 13.75,
                            "longitude": 249.5,
                            "altitude": 914.0
                          },
                          "observedProperty": "ABCDEFGHIJKLMNOP",
                          "uom": 624,
                          "observations": [
                            {
                              "resultTime": 421,
                              "result": {
                                "value": 259.0
                              }
                            }
                          ],
                          "sequenceNumber": 327
                        
                     }
                Sensor List of Measurements (Simplified Version): 
                             value: {
                            
                          "resourceId": "ABCDEFGHI",
                          "observations": [
                            {
                              "resultTime": 445,
                              "result": {
                                "value": -13.75
                              }
                            }
                          ],
                          "sequenceNumber": 781
                        
                     }
                     
              
                
        required: true
      responses:
        "200":
          description: "Successful operation"
        "405":
          description: "Invalid input: not AFarCloud-compliant"
        "415":
          description: "Invalid input: not a JSON"

servers:
  - url: https://138.100.51.114:443/
    description: Torcos      
